{"version":3,"sources":["webpack:///static/js/18.d0df68172b17e912db3b.js","webpack:///./src/components/Deposit.vue?8633","webpack:////Users/weizhiyun019/desktop/bike_wechat/brand/demo/assets/drawable-xxhdpi/a_pay_icon.png?7a70","webpack:////Users/weizhiyun019/desktop/bike_wechat/brand/demo/assets/drawable-xxhdpi/wechat_pay_icon.png?a186","webpack:///./src/components/Deposit.vue","webpack:///./src/components/Deposit.vue?8581"],"names":["webpackJsonp","768","module","exports","__webpack_require__","Component","794","800","816","__webpack_exports__","gen_signature","Date","getTime","Math","random","toString","slice","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","data","step","payType","payTypeArray","icon","key","depositValue","methods","payTypeChange","val","console","log","deposit","this","$http","method","url","BASE_URL","headers","Content-Type","amount","accurateNumber","type","pay_type","openid","window","signature","then","result","_this","status","ext","CONST","wechat_pay","wx","chooseWXPay","timestamp","timeStamp","nonceStr","package","signType","paySign","success","res","$vux","toast","show","text","USER","isPaidDeposit","localStorage","setItem","USER_CACHE_KEY","$router","replace","path","encodeURIComponent","order_str","location","href","bind","catch","e","msg","response","_e$response$ext","error","request","message","created","APP_KEY","_result$data","parseInt","_e$response$data","915","render","_vm","_h","$createElement","_c","_self","attrs","left-options","backText","preventGoBack","on","on-click-back","$event","push","slot","_v","$route","query","hideStep","_e","staticClass","model","callback","$$v","expression","title","_s","options","on-change","staticStyle","padding","color","nativeOn","click","staticRenderFns"],"mappings":"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","file":"static/js/18.d0df68172b17e912db3b.js","sourcesContent":["webpackJsonp([18],{\n\n/***/ 768:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(816),\n  /* template */\n  __webpack_require__(915),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 794:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAkFBMVEUAAABUyPxVx/1VyP1WyP1VzP9p4/9UyP1WzP9YzP9az/9UyPxXyP9VyP1UyPxUyP1UyP1Vyf1a1v9UyP1VyP1Wyf9Wzf9bzv9UyP1UyP1UyP1VyP1VyP1UyP1VyPxWyv9VyP1UyP1VyP1VyP1WyP9UyP1UyP1UyPxVyfxVyf1Wyv9UyPxXyf9WyP9ayP9Ux/z+TdslAAAAL3RSTlMAru6KlR4E+S0ZE7k/6MDSlGwK5J9JIw718c2lkHlXNt2qmn9Sg3NhXmdExSYpJfpdQDcAAAImSURBVEjHzdbpkqIwFIbhT7CD7CIIqKDivnTPuf+7m5agsiSMZqqr+vllWb6kiuQIqDAnHxeDFyz0IEZDsnXpDf4OTxeX3uSZ9/Zs0NvCEW93pCIs145TUuLh24IU7YCYVPlATspieCRzmdys5HGANUloKI3ksY5UPV6A1OPBL4m1ujWPv7SGmSzW8G/Oj8SGXrdFydQbil94t/8zvg4fdB6bw6eoPz6gz7Q/3n8IWTyWrdwvKFumqcSGyf/eSSW2URorxUceh71xaGfBOTjkWTFP6zueVPdaHs82K9R8njY+cdUpv8pj20THR2AbRKlVzZM03kLMOtrVUfOk8bA8iSd9M94fjqsJulYki9cMsMbGY1/9aNm+gC2Nl8BqRg1p0ezjfC6ONYbYpQ53b6LRH66COJI9aI0oQYN5to1WfEBikFCGjmS5mNXjJb5kTyMhdhmGj/gESzwQDDeTbCXYur3P4wCYC1ov4esMvj9O0ZWU8UD4SrRh9Un0j6yblzORAJtWqi3RmmI3t0Qx7QHoRn2PxtUWs/pF0+GnIE5HtyGM7gfFzz/AWXb7VDmdmEL+69H0FBynFu4cwRvL/MSecVU7gnEckpC7tZ4xl5mtk6jPSMaI+Hur+/xmsbtfkY0Cj/p5O9Y+HWtvEBX23KAXrB1kpMyBo9xqDMxXjbf8v1yJa/HDq4TPGbNV2jM49v7asyUepm/etSJGDXOyuftSZ4Re/gfcXwnC0xfPckuuAAAAAElFTkSuQmCC\"\n\n/***/ }),\n\n/***/ 800:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA8CAMAAAAJ1/l9AAAAllBMVEUAAACF1SKD1iKA1CN+1CGS6zl/1CF+1CF/1CJ+1CGB1iR+1CF+1CF/1SGA1SF+1CF+1CF/1CJ/1SKI4i5+1CF/1CGA1CKA1CF/1CJ/1SJ/1SJ/1CKB1iKB1SOF3C2D2yR+1CJ+1CF/1CF/1SJ/1CJ/1SKA1iSC2SZ+1CGA1CF/1CKA1SGC1iKD2SaE1CWA1CKB1SJ+0yEYoWEOAAAAMXRSTlMAFyV2+wTn7uvAMLeyYlPGrZZ7C/XNnpuSbWlYTEcRDvLh2oFxXDgg1qSPiz0UK4hC96ZQcQAAAjNJREFUSMed1ueaqjAQgOEBA4gUKSIqYltdu7tz/zd3jqJEdhKC+f7q+5iQIvDKuoWzXpdm4cCCPy0TG7vX/7k29C/Bivpz4M0YflxS6wJ1mj71YKTF2aXiGeq1eSzAHHXb3Xmkzd07X6EkJ4uO+dEfOtLZ/x99Kl7XvNjDKyPM1yjKALgizSvJtiwjhqQ9gEHxAETdfPJNk3I7BFmlreTuFeQtfAUfW9DapJXHoOrcwn1Qd5TyTarExnkl4+xbhW9jJp/7WIG//WplPSFnRiueD6tvnZbXkYgfW6wVHJ7bYlCtHuW/Urzs2c8duatmIeCresOYZvNh/zjP2U2WULWm3INXCZtybOavmQ75SYooP9cfXhB94/mwo/oCCIDXo3zGP90gOoEFMHfrVYkX8NaO8h3/dPq4qg59RDLuqjnlxduT5huTjPtRKRs8P5Z03LyQ8i/gmfg+btq2welh9fi4ReWU2/TZsMkChB0ox8ZxXVf7W5yJAj6BtwonK0DWl4ivFtAtyyacP3t1WxTykdlJG46Yo2t14b70oj6Bul7L38RUqYvWP6mtQu9YK8eYzp+uOOVdbvu9i0p+luE0GaGaB5LVJu/MYv44J5doar6POvAYsULOUoBl/Djrbp5sZ9sk9vjv0lejBTbaAIRr7JgBYDWHtQ5d7Nz9fWCIum2qW10jfsLTvqYeGXAv0OQ9qBpr6ai+vDwNPUyh9qePJH39LLOP8IG8N19OmcNQHXOyuKzVPzPKmhsNnBzjAAAAAElFTkSuQmCC\"\n\n/***/ }),\n\n/***/ 816:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            step: 1,\n            payType: 4,\n            payTypeArray: [{\n                icon: __webpack_require__(800),\n                key: 4,\n                value: '微信支付'\n            }, {\n                icon: __webpack_require__(794),\n                key: 5,\n                value: '支付宝'\n            }],\n            depositValue: null\n        };\n    },\n\n    methods: {\n        payTypeChange: function payTypeChange(val) {\n            console.log('payTypeChange', val);\n        },\n        deposit: function deposit() {\n            this.$http({\n                method: 'post',\n                url: BASE_URL + '/lock-account/payment',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                data: {\n                    amount: this.accurateNumber(this.depositValue),\n                    type: 1,\n                    pay_type: this.payType,\n                    openid: window.openid || '',\n                    signature: gen_signature()\n                }\n            }).then(function (result) {\n                var _this = this;\n\n                var data = result.data;\n                if (data.status == 0) {\n                    var ext = data.ext;\n                    if (this.payType == CONST.pay_type.wechat_pay) {\n                        wx.chooseWXPay({\n                            timestamp: ext.timeStamp,\n                            nonceStr: ext.nonceStr,\n                            package: ext.package,\n                            signType: ext.signType,\n                            paySign: ext.paySign,\n                            success: function success(res) {\n                                _this.$vux.toast.show({\n                                    text: '成功'\n                                });\n                                window.USER.isPaidDeposit = true;\n                                localStorage.setItem(USER_CACHE_KEY, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(window.USER));\n                                _this.$router.replace({\n                                    path: '/auth'\n                                });\n                            }\n                        });\n                    } else {\n                        var url = encodeURIComponent('https://openapi.alipay.com/gateway.do?' + ext.order_str);\n                        location.href = '/public_api/alipay/pay?url=' + url;\n                    }\n                }\n            }.bind(this)).catch(function (e) {\n                var msg = '';\n                if (e.response) {\n                    var _e$response$ext = e.response.ext,\n                        status = _e$response$ext.status,\n                        error = _e$response$ext.error;\n\n                    msg = error;\n                } else if (e.request) {\n                    msg = e.request;\n                } else {\n                    msg = e.message;\n                }\n                this.$vux.toast.show({\n                    type: 'warn',\n                    text: msg\n                });\n            }.bind(this));\n        }\n    },\n    created: function created() {\n        this.$http({\n            url: BASE_URL + '/lock-account/config?appkey=' + APP_KEY\n        }).then(function (result) {\n            console.log(result.data);\n            var _result$data = result.data,\n                status = _result$data.status,\n                deposit = _result$data.deposit;\n\n            if (status == 0) {\n                this.depositValue = parseInt(deposit, 10);\n            }\n        }.bind(this)).catch(function (e) {\n            var msg = '';\n            if (e.response) {\n                var _e$response$data = e.response.data,\n                    status = _e$response$data.status,\n                    error = _e$response$data.error;\n\n                msg = error;\n            } else if (e.request) {\n                msg = e.request;\n            } else {\n                msg = e.message;\n            }\n            this.$vux.toast.show({\n                type: 'warn',\n                text: msg\n            });\n        }.bind(this));\n    }\n});\n\nfunction gen_signature() {\n    var utc = new Date().getTime();\n    var str = Math.random().toString(36).slice(2);\n    return utc + '-' + str;\n}\n\n/***/ }),\n\n/***/ 915:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('yb-content-main', [_c('yb-header', {\n    attrs: {\n      \"left-options\": {\n        backText: '',\n        preventGoBack: true\n      }\n    },\n    on: {\n      \"on-click-back\": function($event) {\n        _vm.$router.push({\n          path: '/ucenter'\n        })\n      }\n    },\n    slot: \"header\"\n  }, [_vm._v(\"\\n        押金充值\\n    \")]), _vm._v(\" \"), _c('div', {\n    slot: \"main\"\n  }, [(!_vm.$route.query.hideStep) ? _c('div', {\n    staticClass: \"register-step\"\n  }, [_c('group', [_c('step', {\n    model: {\n      value: (_vm.step),\n      callback: function($$v) {\n        _vm.step = $$v\n      },\n      expression: \"step\"\n    }\n  }, [_c('step-item', {\n    attrs: {\n      \"title\": \"手机绑定\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"押金充值\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"实名认证\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"开始用车\"\n    }\n  })], 1)], 1)], 1) : _vm._e(), _vm._v(\" \"), _c('group', [_c('cell', {\n    attrs: {\n      \"title\": \"押金（可退）\"\n    }\n  }, [_vm._v(\"\\n                \" + _vm._s(_vm.depositValue ? _vm.depositValue / 100 : '') + \"\\n            \")])], 1), _vm._v(\" \"), _c('group', [_c('radio', {\n    attrs: {\n      \"options\": _vm.payTypeArray\n    },\n    on: {\n      \"on-change\": _vm.payTypeChange\n    },\n    model: {\n      value: (_vm.payType),\n      callback: function($$v) {\n        _vm.payType = $$v\n      },\n      expression: \"payType\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"padding\": \"15px\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"padding\": \"8px\",\n      \"color\": \"#666666\"\n    }\n  }, [_c('span', [_vm._v(\"• 押金可原路退还\")]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('span', [_vm._v(\"• 车费不再押金内扣除，需另外缴纳\")])]), _vm._v(\" \"), _c('x-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.deposit()\n      }\n    }\n  }, [_vm._v(\"交押金\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/18.d0df68172b17e912db3b.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Deposit.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e9e3c49\\\"}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Deposit.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Deposit.vue\n// module id = 768\n// module chunks = 18","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAkFBMVEUAAABUyPxVx/1VyP1WyP1VzP9p4/9UyP1WzP9YzP9az/9UyPxXyP9VyP1UyPxUyP1UyP1Vyf1a1v9UyP1VyP1Wyf9Wzf9bzv9UyP1UyP1UyP1VyP1VyP1UyP1VyPxWyv9VyP1UyP1VyP1VyP1WyP9UyP1UyP1UyPxVyfxVyf1Wyv9UyPxXyf9WyP9ayP9Ux/z+TdslAAAAL3RSTlMAru6KlR4E+S0ZE7k/6MDSlGwK5J9JIw718c2lkHlXNt2qmn9Sg3NhXmdExSYpJfpdQDcAAAImSURBVEjHzdbpkqIwFIbhT7CD7CIIqKDivnTPuf+7m5agsiSMZqqr+vllWb6kiuQIqDAnHxeDFyz0IEZDsnXpDf4OTxeX3uSZ9/Zs0NvCEW93pCIs145TUuLh24IU7YCYVPlATspieCRzmdys5HGANUloKI3ksY5UPV6A1OPBL4m1ujWPv7SGmSzW8G/Oj8SGXrdFydQbil94t/8zvg4fdB6bw6eoPz6gz7Q/3n8IWTyWrdwvKFumqcSGyf/eSSW2URorxUceh71xaGfBOTjkWTFP6zueVPdaHs82K9R8njY+cdUpv8pj20THR2AbRKlVzZM03kLMOtrVUfOk8bA8iSd9M94fjqsJulYki9cMsMbGY1/9aNm+gC2Nl8BqRg1p0ezjfC6ONYbYpQ53b6LRH66COJI9aI0oQYN5to1WfEBikFCGjmS5mNXjJb5kTyMhdhmGj/gESzwQDDeTbCXYur3P4wCYC1ov4esMvj9O0ZWU8UD4SrRh9Un0j6yblzORAJtWqi3RmmI3t0Qx7QHoRn2PxtUWs/pF0+GnIE5HtyGM7gfFzz/AWXb7VDmdmEL+69H0FBynFu4cwRvL/MSecVU7gnEckpC7tZ4xl5mtk6jPSMaI+Hur+/xmsbtfkY0Cj/p5O9Y+HWtvEBX23KAXrB1kpMyBo9xqDMxXjbf8v1yJa/HDq4TPGbNV2jM49v7asyUepm/etSJGDXOyuftSZ4Re/gfcXwnC0xfPckuuAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/weizhiyun019/desktop/bike_wechat/brand/demo/assets/drawable-xxhdpi/a_pay_icon.png\n// module id = 794\n// module chunks = 4 18","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA8CAMAAAAJ1/l9AAAAllBMVEUAAACF1SKD1iKA1CN+1CGS6zl/1CF+1CF/1CJ+1CGB1iR+1CF+1CF/1SGA1SF+1CF+1CF/1CJ/1SKI4i5+1CF/1CGA1CKA1CF/1CJ/1SJ/1SJ/1CKB1iKB1SOF3C2D2yR+1CJ+1CF/1CF/1SJ/1CJ/1SKA1iSC2SZ+1CGA1CF/1CKA1SGC1iKD2SaE1CWA1CKB1SJ+0yEYoWEOAAAAMXRSTlMAFyV2+wTn7uvAMLeyYlPGrZZ7C/XNnpuSbWlYTEcRDvLh2oFxXDgg1qSPiz0UK4hC96ZQcQAAAjNJREFUSMed1ueaqjAQgOEBA4gUKSIqYltdu7tz/zd3jqJEdhKC+f7q+5iQIvDKuoWzXpdm4cCCPy0TG7vX/7k29C/Bivpz4M0YflxS6wJ1mj71YKTF2aXiGeq1eSzAHHXb3Xmkzd07X6EkJ4uO+dEfOtLZ/x99Kl7XvNjDKyPM1yjKALgizSvJtiwjhqQ9gEHxAETdfPJNk3I7BFmlreTuFeQtfAUfW9DapJXHoOrcwn1Qd5TyTarExnkl4+xbhW9jJp/7WIG//WplPSFnRiueD6tvnZbXkYgfW6wVHJ7bYlCtHuW/Urzs2c8duatmIeCresOYZvNh/zjP2U2WULWm3INXCZtybOavmQ75SYooP9cfXhB94/mwo/oCCIDXo3zGP90gOoEFMHfrVYkX8NaO8h3/dPq4qg59RDLuqjnlxduT5huTjPtRKRs8P5Z03LyQ8i/gmfg+btq2welh9fi4ReWU2/TZsMkChB0ox8ZxXVf7W5yJAj6BtwonK0DWl4ivFtAtyyacP3t1WxTykdlJG46Yo2t14b70oj6Bul7L38RUqYvWP6mtQu9YK8eYzp+uOOVdbvu9i0p+luE0GaGaB5LVJu/MYv44J5doar6POvAYsULOUoBl/Djrbp5sZ9sk9vjv0lejBTbaAIRr7JgBYDWHtQ5d7Nz9fWCIum2qW10jfsLTvqYeGXAv0OQ9qBpr6ai+vDwNPUyh9qePJH39LLOP8IG8N19OmcNQHXOyuKzVPzPKmhsNnBzjAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/weizhiyun019/desktop/bike_wechat/brand/demo/assets/drawable-xxhdpi/wechat_pay_icon.png\n// module id = 800\n// module chunks = 4 18","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data() {\n            return {\n                step: 1,\n                payType: 4,\n                payTypeArray: [{\n                    icon: require('../assets/drawable-xxhdpi/wechat_pay_icon.png'),\n                    key: 4,\n                    value: '微信支付'\n                }, {\n                    icon: require('../assets/drawable-xxhdpi/a_pay_icon.png'),\n                    key: 5,\n                    value: '支付宝'\n                }],\n                depositValue: null\n            }\n        },\n    methods: {\n        payTypeChange(val) {\n            console.log('payTypeChange', val)\n        },\n        deposit() {\n            this.$http({\n                method: 'post',\n                url: `${BASE_URL}/lock-account/payment`,\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                data: {\n                    amount: this.accurateNumber(this.depositValue),\n                    type: 1,\n                    pay_type: this.payType,\n                    openid: window.openid || '',\n                    signature: gen_signature()\n                }\n            }).then(function(result) {\n                const data = result.data;\n                if (data.status == 0) {\n                    const ext = data.ext;\n                    if (this.payType == CONST.pay_type.wechat_pay) {\n                        wx.chooseWXPay({\n                            timestamp: ext.timeStamp,\n                            nonceStr: ext.nonceStr, // 支付签名随机串，不长于 32 位\n                            package: ext.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n                            signType: ext.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n                            paySign: ext.paySign, // 支付签名\n                            success: (res) => {\n                                this.$vux.toast.show({\n                                    text: '成功'\n                                })\n                                window.USER.isPaidDeposit = true;\n                                localStorage.setItem(USER_CACHE_KEY, JSON.stringify(window.USER));\n                                this.$router.replace({\n                                    path: '/auth'\n                                });\n                            }\n                        });\n                    } else {\n                        const url = encodeURIComponent('https://openapi.alipay.com/gateway.do?' + ext.order_str);\n                       location.href= '/public_api/alipay/pay?url=' + url;\n                    }\n                }\n            }.bind(this)).catch(function(e) {\n                var msg = '';\n                if (e.response) {\n                    const { status, error } = e.response.ext;\n                    msg = error;\n                } else if (e.request) {\n                    msg = e.request;\n                } else {\n                    msg = e.message;\n                }\n                this.$vux.toast.show({\n                    type: 'warn',\n                    text: msg\n                })\n            }.bind(this));\n        }\n    },\n    created() {\n        this.$http({\n            url: `${BASE_URL}/lock-account/config?appkey=${APP_KEY}`,\n        }).then(function(result) {\n            console.log(result.data);\n            const {\n                status,\n                deposit\n            } = result.data;\n            if (status == 0) {\n                this.depositValue = parseInt(deposit, 10);\n            }\n        }.bind(this)).catch(function(e) {\n            var msg = '';\n            if (e.response) {\n                const { status, error } = e.response.data;\n                msg = error;\n            } else if (e.request) {\n                msg = e.request;\n            } else {\n                msg = e.message;\n            }\n            this.$vux.toast.show({\n                type: 'warn',\n                text: msg\n            })\n        }.bind(this));\n    }\n}\n\nfunction gen_signature() {\n    var utc = new Date().getTime();\n    var str = Math.random().toString(36).slice(2);\n    return utc + '-' + str;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Deposit.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('yb-content-main', [_c('yb-header', {\n    attrs: {\n      \"left-options\": {\n        backText: '',\n        preventGoBack: true\n      }\n    },\n    on: {\n      \"on-click-back\": function($event) {\n        _vm.$router.push({\n          path: '/ucenter'\n        })\n      }\n    },\n    slot: \"header\"\n  }, [_vm._v(\"\\n        押金充值\\n    \")]), _vm._v(\" \"), _c('div', {\n    slot: \"main\"\n  }, [(!_vm.$route.query.hideStep) ? _c('div', {\n    staticClass: \"register-step\"\n  }, [_c('group', [_c('step', {\n    model: {\n      value: (_vm.step),\n      callback: function($$v) {\n        _vm.step = $$v\n      },\n      expression: \"step\"\n    }\n  }, [_c('step-item', {\n    attrs: {\n      \"title\": \"手机绑定\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"押金充值\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"实名认证\"\n    }\n  }), _vm._v(\" \"), _c('step-item', {\n    attrs: {\n      \"title\": \"开始用车\"\n    }\n  })], 1)], 1)], 1) : _vm._e(), _vm._v(\" \"), _c('group', [_c('cell', {\n    attrs: {\n      \"title\": \"押金（可退）\"\n    }\n  }, [_vm._v(\"\\n                \" + _vm._s(_vm.depositValue ? _vm.depositValue / 100 : '') + \"\\n            \")])], 1), _vm._v(\" \"), _c('group', [_c('radio', {\n    attrs: {\n      \"options\": _vm.payTypeArray\n    },\n    on: {\n      \"on-change\": _vm.payTypeChange\n    },\n    model: {\n      value: (_vm.payType),\n      callback: function($$v) {\n        _vm.payType = $$v\n      },\n      expression: \"payType\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"padding\": \"15px\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"padding\": \"8px\",\n      \"color\": \"#666666\"\n    }\n  }, [_c('span', [_vm._v(\"• 押金可原路退还\")]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('span', [_vm._v(\"• 车费不再押金内扣除，需另外缴纳\")])]), _vm._v(\" \"), _c('x-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.deposit()\n      }\n    }\n  }, [_vm._v(\"交押金\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e9e3c49\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Deposit.vue\n// module id = 915\n// module chunks = 18"],"sourceRoot":""}