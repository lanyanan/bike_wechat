webpackJsonp([5],{780:function(t,e,n){n(952);var a=n(0)(n(828),n(919),null,null);t.exports=a.exports},810:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["url"],data:function(){return{loading:!0,imgStyle:{left:0,top:0,width:"100%"},imgPosition:{left:0,top:0},limit:{maxLeft:0,minLeft:0,maxTop:0,minTop:0},drag:{x:NaN,y:NaN},scale:100,imageData:null}},methods:{pinch:function(t){this.scale=this.scale*(1+(t.scale-1)/20),this.imgStyle.width=this.scale+"%",t.preventDefault()},pressMove:function(t){this.imgPosition.left+=t.deltaX,this.imgPosition.top+=t.deltaY,this.imgStyle.left=this.imgPosition.left+"px",this.imgStyle.top=this.imgPosition.top+"px",t.preventDefault()},touchstart:function(t){t.preventDefault()},touchmove:function(t){var e=t.touches.item(0),n=e.clientX,a=e.clientY;if(!isNaN(this.drag.x)){var o=this.drag,i=o.x,s=o.y;this.imgPosition.left+=n-i,this.imgPosition.top+=a-s,this.imgStyle.left=this.imgPosition.left+"px",this.imgStyle.top=this.imgPosition.top+"px",this.drag.x=n,this.drag.y=a}t.preventDefault()},crop:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),a=this.$refs.avatar,o=this.$refs.mask,i=o.offsetLeft-a.offsetLeft,s=o.offsetTop-a.offsetTop,r=o.getBoundingClientRect(),c=a.getBoundingClientRect(),l={y1:r.top,y2:r.top+o.clientHeight,x1:r.left,x2:r.left+o.clientWidth},A={y1:c.top,y2:c.top+a.clientHeight,x1:c.left,x2:c.left+a.clientWidth},f=r.left>=c.left?i:0,u=r.top>=c.top?s:0,m=Math.min(A.x2,l.x2)-Math.max(A.x1,l.x1),d=Math.min(A.y2,l.y2)-Math.max(A.y1,l.y1),h=Math.max(0,A.x1-l.x1),p=Math.max(0,A.y1-l.y1),C=document.createElement("canvas"),g=C.getContext("2d");C.width=a.width,C.height=a.height,g.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,a.width,a.height);var v=document.createElement("img");v.onload=function(){e.width=o.clientWidth,e.height=o.clientHeight,n.drawImage(v,f,u,m,d,h,p,m,d),t(e)},v.src=C.toDataURL()}},mounted:function(){var t=this,e=this.$refs.avatar,n=new Image;n.src=this.url,n.onload=function(){var a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.naturalWidth,a.height=n.naturalHeight,o.drawImage(n,0,0,a.width,a.height,0,0,a.width,a.height),e.onload=function(){t.loading=!1},e.src=a.toDataURL()}},destroyed:function(){this.url&&URL.revokeObjectURL(this.url)}}},828:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),o=n.n(a),i=n(936),s=n.n(i);e.default={components:{"crop-photo":s.a},data:function(){return{loading:!1,url:this.$route.query.url}},methods:{uploadAvatar:function(){var t=this;this.$refs.cropPhoto.crop(function(e){t.loading=!0,e.toBlob(function(e){var n=new FormData;n.append("file",e),t.$http.post(""+UPLOAD_URL,n).then(function(e){var n=UPLOAD_BASE_URL+"/"+e.data.path;t.$http({method:"post",url:BASE_URL+"/lock-account/extra_account_info",data:{icon:n}}).then(function(){t.loading=!1,t.$router.back()}).catch(function(e){alert(o()(e)),t.loading=!1})})})})}}}},850:function(t,e,n){e=t.exports=n(756)(),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"SetAvatar.vue",sourceRoot:""}])},868:function(t,e,n){e=t.exports=n(756)(),e.push([t.i,".avatar[data-v-f3c6ef26]{position:absolute}.background[data-v-f3c6ef26]{position:absolute;top:0;width:100%;height:100%;overflow:hidden}.mask[data-v-f3c6ef26]{box-shadow:0 0 0 9999px rgba(0,0,255,.2)}.mask[data-v-f3c6ef26],.spinner[data-v-f3c6ef26]{position:absolute;top:50%;left:50%;width:7.808687164470474rem;height:7.808687164470474rem;margin-top:-3.904343582235237rem;margin-left:-3.904343582235237rem}.double-bounce1[data-v-f3c6ef26],.double-bounce2[data-v-f3c6ef26]{width:100%;height:100%;border-radius:50%;background-color:#333;opacity:.6;position:absolute;top:0;left:0;-webkit-animation:sk-bounce 2s infinite ease-in-out;animation:sk-bounce 2s infinite ease-in-out}.double-bounce2[data-v-f3c6ef26]{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes sk-bounce{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}@keyframes sk-bounce{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}","",{version:3,sources:["/Users/weizhiyun019/Desktop/bike_wechat/src/components/CropPhoto.vue"],names:[],mappings:"AACA,yBACE,iBAAmB,CACpB,AACD,6BACE,kBAAmB,AACnB,MAAO,AACP,WAAY,AACZ,YAAa,AACb,eAAiB,CAClB,AACD,uBAQE,wCAA2C,CAC5C,AACD,iDATE,kBAAmB,AACnB,QAAS,AACT,SAAU,AACV,2BAA4B,AAC5B,4BAA6B,AAC7B,iCAAkC,AAClC,iCAAmC,CAWpC,AACD,kEAEE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,sBAAuB,AACvB,WAAa,AACb,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,oDAAqD,AACrD,2CAA6C,CAC9C,AACD,iCACE,4BAA6B,AAC7B,mBAAqB,CACtB,AASD,6BACA,MACI,mBAAoB,AACpB,0BAA4B,CAC/B,AACD,IACI,mBAAoB,AACpB,0BAA4B,CAC/B,CACA,AACD,qBACA,MACI,mBAAoB,AACpB,0BAA4B,CAC/B,AACD,IACI,mBAAoB,AACpB,0BAA4B,CAC/B,CACA",file:"CropPhoto.vue",sourcesContent:["\n.avatar[data-v-f3c6ef26] {\n  position: absolute;\n}\n.background[data-v-f3c6ef26] {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.mask[data-v-f3c6ef26] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 7.808687164470474rem;\n  height: 7.808687164470474rem;\n  margin-top: -3.904343582235237rem;\n  margin-left: -3.904343582235237rem;\n  box-shadow: 0 0 0 9999px rgba(0,0,255,0.2);\n}\n.spinner[data-v-f3c6ef26] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 7.808687164470474rem;\n  height: 7.808687164470474rem;\n  margin-top: -3.904343582235237rem;\n  margin-left: -3.904343582235237rem;\n}\n.double-bounce1[data-v-f3c6ef26],\n.double-bounce2[data-v-f3c6ef26] {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: #333;\n  opacity: 0.6;\n  position: absolute;\n  top: 0;\n  left: 0;\n  -webkit-animation: sk-bounce 2s infinite ease-in-out;\n  animation: sk-bounce 2s infinite ease-in-out;\n}\n.double-bounce2[data-v-f3c6ef26] {\n  -webkit-animation-delay: -1s;\n  animation-delay: -1s;\n}\n@-webkit-keyframes sk-bounce {\n0%, 100% {\n    -webkit-transform: scale(0);\n}\n50% {\n    -webkit-transform: scale(1);\n}\n}\n@-webkit-keyframes sk-bounce {\n0%, 100% {\n    transform: scale(0);\n    -webkit-transform: scale(0);\n}\n50% {\n    transform: scale(1);\n    -webkit-transform: scale(1);\n}\n}\n@keyframes sk-bounce {\n0%, 100% {\n    transform: scale(0);\n    -webkit-transform: scale(0);\n}\n50% {\n    transform: scale(1);\n    -webkit-transform: scale(1);\n}\n}"],sourceRoot:""}])},919:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("yb-content-main",[n("yb-header",{attrs:{"left-options":{backText:"",preventGoBack:!1}},slot:"header"},[t._v("\n        裁剪头像\n        "),n("a",{on:{click:function(e){e.preventDefault(),t.uploadAvatar(e)}},slot:"right"},[t._v("\n            确定\n        ")])]),t._v(" "),n("div",{slot:"main"},[n("crop-photo",{ref:"cropPhoto",attrs:{url:t.url},slot:"default"}),t._v(" "),n("div",[n("loading",{attrs:{text:"上传中..."},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1)],1)],1)},staticRenderFns:[]}},934:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"finger",rawName:"v-finger:pinch",value:t.pinch,expression:"pinch",arg:"pinch"},{name:"finger",rawName:"v-finger:press-move",value:t.pressMove,expression:"pressMove",arg:"press-move"}],staticClass:"background",on:{touchstart:t.touchstart,touchmove:t.touchmove}},[n("img",{ref:"avatar",staticClass:"avatar",style:t.imgStyle,attrs:{draggable:"false"}}),t._v(" "),t.loading?n("div",{staticClass:"spinner"},[n("div",{staticClass:"double-bounce1"}),t._v(" "),n("div",{staticClass:"double-bounce2"})]):n("div",{ref:"mask",staticClass:"mask"})])},staticRenderFns:[]}},936:function(t,e,n){n(970);var a=n(0)(n(810),n(934),"data-v-f3c6ef26",null);t.exports=a.exports},952:function(t,e,n){var a=n(850);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(757)("737c7593",a,!0)},970:function(t,e,n){var a=n(868);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(757)("8fc6fc1e",a,!0)}});
//# sourceMappingURL=5.3f63f0816c8cd0f4704a.js.map